<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<title>lights.glsl</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="Style.css">

<body>
<div class="link-container">
    <h4 class="floating-link">Homepage</h4>
    <a class="floating-link" href="../Homepage.html">Home</a>
    <h4 class="floating-link">High-Level Documentation</h4>
    <a class="floating-link" href="FileSummaries.html">Project File Summaries</a>
    <a class="floating-link" href="FunctionHierarchy.html">Main Loop Function Hierarchy</a>
    <h4 class="floating-link">Most Important Files</h4>
    <a class="floating-link" href="PanningCamera.cpp.html"          >PanningCamera.cpp</a>
    <a class="floating-link" href="FlyingCamera.cpp.html"           >FlyingCamera.cpp</a>
    <a class="floating-link" href="SceneElement.cpp.html"           >SceneElement.cpp</a>
    <a class="floating-link" href="PointLightElement.cpp.html"      >PointLightElement.cpp</a>
    <a class="floating-link" href="BaseLitEntityShader.cpp.html"    >BaseLitEntityShader.cpp</a>
    <a class="floating-link" href="Lights.h.html"                   >Lights.h</a>
    <a class="floating-link" href="Lights.cpp.html"                 >Lights.cpp</a>
    <a class="floating-link active" href="lights.glsl.html"                >lights.glsl</a>
    <a class="floating-link" href="vert.glsl (entity).html"         >vert.glsl (entity)</a>
    <a class="floating-link" href="frag.glsl (entity).html"         >frag.glsl (entity)</a>
    <a class="floating-link" href="vert.glsl (animated_entity).html">vert.glsl (animated entity)</a>
    <a class="floating-link" href="frag.glsl (animated_entity).html">frag.glsl (animated entity)</a>
    <a class="floating-link" href="vert.glsl (emissive_entity).html">vert.glsl (emissive entity)</a>
    <a class="floating-link" href="frag.glsl (emissive_entity).html">frag.glsl (emissive entity)</a>
</div>
<h1>lights.glsl</h1>
<br>
<h3>Location in Project</h3>
<p>res/shaders/common/lights.glsl</p>
<br>
<h3>Functionality and Purpose of this File</h3>
<p>This file holds functionality that is common across the normal entity and animated entity vertex and fragment shaders. This primarily includes light-related calculations.</p>
<br>
<h2>Method Documentation</h2>
<br>
<div id="PointLightCalculation">
    <h3><code>void point_light_calculation(PointLightData point_light, LightCalculatioData calculation_data, float shininess, inout vec3 total_diffuse, inout vec3 total_specular, inout vec3 total_ambient)</code></h3>
    <p>This function calculates the light components emanating from a given point light onto a given fragment (or vertex), and adds the result to the fragment's (or vertex's) total diffuse, specular, and ambient light components.</p>
    <h4>Parameters</h4>
    <p><code>PointLightData point_light</code>: A struct defined in <code>lights.glsl</code>, this holds the position and colour of a single point light.</p>
    <p><code>LightCalculatioData calculation_data</code>: A struct defined in <code>lights.glsl</code>, this holds the position, vector to camera, and normal vector of a single fragment or vertex.</p>
    <p><code>float shininess</code>: The shininess material property belonging to the single fragment or vertex.</p>
    <p><code>inout vec3 total_diffuse</code>: The total diffuse component resulting from the point lights in the scene shining on the single fragment or vertex.</p>
    <p><code>inout vec3 total_specular</code>: The total specular component resulting from the point lights in the scene shining on the single fragment or vertex.</p>
    <p><code>inout vec3 total_ambient</code>: The total ambient component resulting from the point lights in the scene shining on the single fragment or vertex.</p>
    <h4>Where is this called?</h4>
    <p>This is only called inside <code><a href="#TotalLightCalculation">total_light_calculation</a></code> in <code>lights.glsl</code>.</p>
    <h4>Remarks</h4>
    <p>To understand what the equations are doing, refer to the slides for Lecture 16: Shading in OpenGL, you will notice that these equations are the same as those used for Phong Shading.</p>
</div>
<br>
<br>
<br>
<div id="TotalLightCalculation">
    <h3><code>LightingResult total_light_calculation(LightCalculatioData light_calculation_data, Material material #if NUM_PL > 0 , PointLightData point_lights[NUM_PL] #endif)</code></h3>
    <p>This function calculates the total diffuse, specular, and ambient light shining on the given fragment or vertex. It performs this calculation by iterating through the point lights in the scene (if there are any) and tracking the cumulative diffuse, specular, and ambient light components resulting from these lights.</p>
    <h4>Parameters</h4>
    <p><code>LightCalculatioData light_calculation_data</code>: A struct defined in <code>lights.glsl</code>, this holds the position, vector to camera, and normal vector of a single fragment or vertex.</p>
    <p><code>Material material</code>: A struct defined in <code>lights.glsl</code> that holds various light-related material properties of a single fragment or vertex.</p>
    <p><code>PointLightData point_lights[NUM_PL]</code>: An array of <code>PointLightData</code> structs, this holds information on the position and colour of all the point lights in the scene.</p>
    <h4>Returns</h4>
    <p>A <code>LightingResult</code> struct defined in <code>lights.glsl</code> that holds the total diffuse, specular, and ambient light components of a single fragment or vertex.</p>
    <h4>Where is this called?</h4>
    <p>This is called in the vertex shaders of the normal entity and animated entity.</p>
</div>
<br>
<br>
<br>
<div id="ResolveTexturedLightCalculation">
    <h3><code>vec3 resolve_textured_light_calculation(LightingResult result, sampler2D diffuse_texture, sampler2D specular_map, vec2 texture_coordinate)</code></h3>
    <p>This function performs the last step in the light-related calculations and combines the <code>LightingResult</code> derived from the scene's lights with the fragment's texture information to determine the fragment's colour.</p>
    <h4>Parameters</h4>
    <p><code>LightingResult result</code>: A struct defined in <code>lights.glsl</code> that holds the total diffuse, specular, and ambient light components of a single fragment.</p>
    <p><code>sampler2D diffuse_texture</code>: The sampler to which the diffuse texture is bound.</p>
    <p><code>sampler2D specular_map</code>: The sampler to which the specular texture is bound.</p>
    <p><code>vec2 texture_coordinate</code>: The texture coordinate at which the texture will be sampled.</p>
    <h4>Returns</h4>
    <p>A <code>vec3</code> containing the colour of the fragment this is being called upon.</p>
    <h4>Where is this called?</h4>
    <p>This is called in the fragment shaders of the normal entity and animated entity.</p>
    <h4>Remarks</h4>
    <p>For more information on what <code>texture(diffuse_texture, texture_coordinate).rgb</code> does, see the documentation <a href="https://registry.khronos.org/OpenGL-Refpages/gl4/html/texture.xhtml" target="_blank">here</a>.</p>
</div>
</body>
</html>